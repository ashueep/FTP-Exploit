# Anonymous FTP-Exploit

## FTP
File Transfer Protocol (FTP) is, as the name suggests, a protocol used to allow remote transfer of files over a network. It uses a client-server model to do this.

A typical FTP session operates using two channels:

* A command (sometimes called the control) channel
* A data channel. 

As their names imply, the command channel is used for transmitting commands as well as replies to those commands, while the data channel is used for transferring data.

FTP operates using a client-server protocol. The client initiates a connection with the server, the server validates whatever login credentials are provided and then opens the session.

While the session is open, the client may execute FTP commands on the server. 

### Active Vs. Passive FTP

The FTP server may support either Active or Passive connections, or both. 

* In an Active FTP connection, the client opens a port and listens. The server is required to actively connect to it. 
* In a Passive FTP connection, the server opens a port and listens (passively) and the client connects to it.  

This separation of command information and data into separate channels is a way of being able to send commands to the server without having to wait for the current data transfer to finish. If both channels were interlinked, you could only enter commands in between data transfers, which wouldn't be efficient for either large file transfers, or slow internet connections.

Standard FTP port: `21`.

**nmap scan result** : [nmap](/nmap/nmap.txt)

## Exploit

IP of machine : `10.10.231.99`

This exploit helps us to see what files we can access- and if they contain any information that might allow us to pop a shell on the system.

Some vulnerable versions of in.ftpd and some other FTP server variants return different responses to the "cwd" command for home directories which exist and those that donâ€™t. This can be exploited because you can issue cwd commands before authentication, and if there's a home directory- there is more than likely a user account to go with it. 

More info [here](https://www.exploit-db.com/exploits/20745)

In FTP both the command and data channels are unencrypted. Any data sent over these channels can be intercepted and read. 

With data from FTP being sent in plaintext, if a man-in-the-middle attack took place an attacker could reveal anything sent through this protocol (such as passwords). 

More info [here](https://www.jscape.com/blog/bid/91906/Countering-Packet-Sniffers-Using-Encrypted-FTP).

Possible Username through Enum method : `Mike`.

Using the possible username we can **brute-force** our way in using Hydra.

1. Signed in as anon ftp user.
2. had access to [file](/Misc/PUBLIC_NOTICE.txt)
3. Enumerated the username to find plausible username and password for ftp server using Hydra to bruteforce
4. Captured flag!
